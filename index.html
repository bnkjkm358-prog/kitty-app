<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- è®©å®ƒåƒAppä¸€æ ·å…¨å±è¿è¡Œ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="å¤©å¤©å®å®çš„æ—¥å¸¸">
    <meta name="theme-color" content="#FFF5F7">
    <title>å¤©å¤©å®å®çš„æ—¥å¸¸</title>

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- App å›¾æ ‡ï¼ˆiOS / Android æ¡Œé¢å›¾æ ‡ï¼‰ -->
    <link rel="apple-touch-icon" href="hk-icon-512.png">
<link rel="icon" href="hk-icon-192.png" type="image/jpeg">

    
    <!-- å¼•å…¥ React å’Œ Babel (æµè§ˆå™¨ç›´æ¥è¿è¡ŒReact) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['"Varela Round"', 'sans-serif'] },
            colors: {
              hk: { pale: '#FFF5F7', soft: '#FFC0CB', vivid: '#FF69B4', red: '#E60012', yellow: '#FFA500', text: '#4A4A4A' }
            },
            animation: {
              'wiggle': 'wiggle 2s ease-in-out infinite',
              'float': 'float 6s ease-in-out infinite',
            },
            keyframes: {
              wiggle: { '0%, 100%': { transform: 'rotate(-3deg)' }, '50%': { transform: 'rotate(3deg)' } },
              float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } }
            }
          }
        }
      }
    </script>

    <style>
        body {
            background-color: #FFF5F7;
            background-image: radial-gradient(#FFD1DC 20%, transparent 20%), radial-gradient(#FFD1DC 20%, transparent 20%);
            background-size: 40px 40px;
            background-position: 0 0, 20px 20px;
            font-family: 'Varela Round', sans-serif;
            color: #4A4A4A;
            overscroll-behavior: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React ä»£ç é€»è¾‘ -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- é…ç½®åŒºåŸŸ ---
        // DeepSeek API Keyï¼ˆçœŸå®é¡¹ç›®ä¸è¦æ”¾å‰ç«¯ï¼Œè¿™é‡Œåªæ˜¯ä½ è‡ªç”¨çš„å°ç©å…·ï¼‰
        const API_KEY = "sk-46f6dd45742d4dbbacbc7442ca2079db"; 

        // --- å›¾æ ‡ç»„ä»¶ (SVG) ---
        const Icons = {
            Star: ({ fill, className, stroke }) => (
                <svg viewBox="0 0 24 24" fill={fill || "none"} stroke={stroke || "currentColor"} strokeWidth="2" className={className}>
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                </svg>
            ),
            Check: () => (
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2.5">
                    <polyline points="9 11 12 14 22 4"/>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                </svg>
            ),
            Gift: () => (
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2.5">
                    <polyline points="20 12 20 22 4 22 4 12"/>
                    <rect x="2" y="7" width="20" height="5"/>
                    <line x1="12" y1="22" x2="12" y2="7"/>
                    <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/>
                    <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>
                </svg>
            ),
            Utensils: () => (
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2.5">
                    <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                    <path d="M7 2v20"/>
                    <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                </svg>
            ),
            User: () => (
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2.5">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="8.5" cy="7" r="4"/>
                    <line x1="20" y1="8" x2="20" y2="14"/>
                    <line x1="23" y1="11" x2="17" y2="11"/>
                </svg>
            ),
            Plus: () => (
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="3">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            ),
            Trash: () => (
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                    <polyline points="3 6 5 6 21 6"/>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                </svg>
            ),
            Left: () => (
                <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" strokeWidth="3">
                    <polyline points="15 18 9 12 15 6"/>
                </svg>
            ),
            Right: () => (
                <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" strokeWidth="3">
                    <polyline points="9 18 15 12 9 6"/>
                </svg>
            ),
            Sparkles: () => (
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
                </svg>
            )
        };

        // Hello Kitty è£…é¥°å…ƒç´ 
        const HKElements = {
            Bow: ({ className }) => (
                <svg viewBox="0 0 100 80" className={`drop-shadow-md ${className}`}>
                    <path d="M50 40 C 30 20, 10 20, 10 40 C 10 70, 40 70, 50 40" fill="#E60012" stroke="white" strokeWidth="4"/>
                    <path d="M50 40 C 70 20, 90 20, 90 40 C 90 70, 60 70, 50 40" fill="#E60012" stroke="white" strokeWidth="4"/>
                    <circle cx="50" cy="40" r="12" fill="#E60012" stroke="white" strokeWidth="4" />
                </svg>
            ),
            Apple: () => (
                <svg viewBox="0 0 100 100">
                    <path d="M50 35 C 30 10, 10 40, 30 70 C 40 85, 50 85, 50 80 C 50 85, 60 85, 70 70 C 90 40, 70 10, 50 35" fill="#E60012" stroke="#660000" strokeWidth="2"/>
                    <path d="M50 35 Q 50 15 60 10" stroke="#336600" strokeWidth="3" fill="none"/>
                    <path d="M50 35 Q 30 25 25 15 Q 40 15 50 35" fill="#4C9900"/>
                </svg>
            )
        };

        // æœ¬åœ°å…œåº•ï¼šä¸ç”¨é’±çš„ Kitty æ€»ç»“
        const buildLocalSummary = (current, date) => {
            const moodMap = {
                'ğŸ¥°': 'ä»Šå¤©æ˜¯è¶…ç”œçš„ä¸€å¤©',
                'ğŸ˜Š': 'ä»Šå¤©å¿ƒæƒ…è½¯è½¯ç³¯ç³¯çš„',
                'ğŸ˜': 'ä»Šå¤©æœ‰ç‚¹æ™®é€šï¼Œä¸è¿‡ Kitty ä¹Ÿåœ¨é™ªä½ ',
                'ğŸ˜¢': 'ä»Šå¤©æœ‰ç‚¹å°éš¾è¿‡ï¼ŒKitty æƒ³ç»™ä½ æŠ±æŠ±',
                'ğŸ˜¡': 'ä»Šå¤©æ°”é¼“é¼“çš„ï¼Œè®°å¾—å¥½å¥½å“„å“„è‡ªå·±'
            };

            const moodText = moodMap[current.mood] || 'ä»Šå¤©çš„å¿ƒæƒ…æœ‰ç‚¹ç¥ç§˜ï¼Œåªæœ‰å¤©å¤©å®å®è‡ªå·±çŸ¥é“';
            const todoCount = (current.herTodos || []).length;
            const rating = current.rating || 0;

            let bfPart = '';
            if (rating >= 4) {
                bfPart = 'ç”·æœ‹å‹å¼ é’Šç»´ä»Šå¤©è¡¨ç°ä¸é”™ï¼Œç»™ä»–ä¸€é¢—å°æ˜Ÿæ˜Ÿâ­ã€‚';
            } else if (rating === 3) {
                bfPart = 'ç”·æœ‹å‹å¼ é’Šç»´ä»Šå¤©å‹‰å¼ºè¿‡å…³ï¼Œå†å¤šå¤šåŠªåŠ›å“„å¤©å¤©å®å®ï½';
            } else if (rating > 0) {
                bfPart = 'ç”·æœ‹å‹å¼ é’Šç»´ä»Šå¤©è¦å¥½å¥½åçœï¼Œå¤šæŠ±æŠ±å¤©å¤©å®å®ï¼Œå¤šè¯´ç‚¹å¥½å¬çš„ï¼';
            } else {
                bfPart = 'è¿˜æ²¡æœ‰ç»™å¼ é’Šç»´æ‰“åˆ†å‘¢ï¼Œä»–åœ¨å·å·æœŸå¾…è¯„åˆ†å“¦ï½';
            }

            return `Kitty æ—¥æŠ¥ ${date}ï¼š${moodText}ã€‚ä½ å®‰æ’äº† ${todoCount} ä»¶å°ä»»åŠ¡ï¼Œè®°å¾—ä¹Ÿè¦ç»™è‡ªå·±ç•™ä¸€ç‚¹æ‡’æ‡’æ—¶é—´ï½${bfPart} ğŸ€ğŸ`;
        };

        // --- ç»„ä»¶: å¡ç‰‡ ---
        const SectionCard = ({ title, icon, tasks, onAdd, onToggle, onDelete, placeholder }) => {
            const [val, setVal] = useState('');
            const handleAdd = () => { if(val.trim()){ onAdd(val.trim()); setVal(''); }};

            return (
                <div className="bg-white rounded-[2rem] p-5 shadow-lg border-[3px] border-white ring-2 ring-hk-pale/80 relative overflow-hidden">
                    <div className="absolute top-0 right-0 w-12 h-12 bg-gradient-to-bl from-hk-pale to-transparent rounded-bl-3xl -mr-2 -mt-2"></div>
                    <div className="flex items-center gap-3 mb-4 relative z-10">
                        <div className="p-2 bg-hk-pale rounded-2xl text-hk-vivid shadow-sm border border-white">{icon}</div>
                        <h2 className="text-lg font-bold text-gray-700 flex-1">{title}</h2>
                    </div>
                    <div className="space-y-2 mb-4 min-h-[20px] relative z-10">
                        {tasks.length === 0 && <div className="text-gray-300 text-center text-xs py-2">æš‚æ— å†…å®¹ï¼Œå¿«å»æ·»åŠ å§ ğŸ€</div>}
                        {tasks.map(t => (
                            <div key={t.id} className="flex items-center gap-3 group">
                                <button onClick={() => onToggle(t.id)} className="w-6 h-6 flex-shrink-0">
                                    {t.completed ? 
                                        <svg viewBox="0 0 24 24" className="w-full h-full text-hk-red animate-wiggle">
                                            <path d="M12 2C14 2 15 4 15 6C17 6 19 5 20 7C21 9 20 11 18 12C20 13 21 15 20 17C19 19 17 18 15 18C15 20 14 22 12 22C10 22 9 20 9 18C7 18 5 19 4 17C3 15 4 13 6 12C4 11 3 9 4 7C5 5 7 6 9 6C9 4 10 2 12 2Z" fill="currentColor"/>
                                            <circle cx="12" cy="12" r="3" fill="#FFDD00"/>
                                        </svg> :
                                        <svg viewBox="0 0 24 24" className="w-full h-full text-hk-soft/50">
                                            <circle cx="12" cy="12" r="8" stroke="currentColor" strokeWidth="2" fill="white"/>
                                        </svg>
                                    }
                                </button>
                                <span className={`flex-1 text-sm ${t.completed ? 'line-through text-gray-300' : 'text-gray-600'}`}>{t.text}</span>
                                <button onClick={() => onDelete(t.id)} className="text-gray-300 hover:text-red-500">
                                    <Icons.Trash/>
                                </button>
                            </div>
                        ))}
                    </div>
                    <div className="flex gap-2 bg-hk-pale/60 p-1 rounded-2xl relative z-10">
                        <input
                            type="text"
                            value={val}
                            onChange={e=>setVal(e.target.value)}
                            placeholder={placeholder}
                            className="flex-1 bg-transparent outline-none px-3 text-sm text-gray-600"
                        />
                        <button onClick={handleAdd} className="bg-hk-soft text-white p-2 rounded-xl">
                            <Icons.Plus/>
                        </button>
                    </div>
                </div>
            );
        };

        // --- ä¸»åº”ç”¨ ---
        const App = () => {
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
            const [data, setData] = useState({});
            const [aiMsg, setAiMsg] = useState(null);
            const [loading, setLoading] = useState(false);

            // æ•°æ®åŠ è½½
            useEffect(() => {
                const saved = localStorage.getItem('hk_app_data');
                if(saved) setData(JSON.parse(saved));
            }, []);

            useEffect(() => {
                if(Object.keys(data).length > 0) localStorage.setItem('hk_app_data', JSON.stringify(data));
            }, [data]);

            const current = data[date] || {
                herTodos:[],
                foodCravings:[],
                boyfriendTasks:[],
                wishlist:[],
                mood:null,
                rating:0,
                comment:''
            };

            const update = (field, val) => {
                const newData = { ...data, [date]: { ...current, [field]: val } };
                setData(newData);
            };
            
            // ä»»åŠ¡æ“ä½œè¾…åŠ©å‡½æ•°
            const taskOps = (field) => ({
                onAdd: (text) =>
                    update(field, [...(current[field] || []), { id: Date.now(), text, completed:false }]),
                onToggle: (id) =>
                    update(field, (current[field] || []).map(t => t.id === id ? { ...t, completed: !t.completed } : t)),
                onDelete: (id) =>
                    update(field, (current[field] || []).filter(t => t.id !== id))
            });

            // ä½¿ç”¨ DeepSeek è°ƒç”¨ AIï¼Œæ€»ç»“ï¼›ä½™é¢ä¸è¶³/æŠ¥é”™å°±ç”¨æœ¬åœ° Kitty æ€»ç»“å…œåº•
            const handleAI = async () => {
                setLoading(true);

                const prompt = `æ‰®æ¼” Hello Kittyã€‚ç”¨æˆ·æ˜¯â€œå¤©å¤©å®å®â€ã€‚ä»»åŠ¡ï¼šå†™ä¸€ä¸ªå¯çˆ±çš„ä¸­æ–‡æ¯æ—¥æ€»ç»“ã€‚
æ•°æ®ï¼šå¿ƒæƒ…-${current.mood||'æœªçŸ¥'}ï¼Œè¯„åˆ†-${current.rating}/5ï¼Œå¾…åŠ-${current.herTodos.length}ä¸ªã€‚
è¦æ±‚ï¼šè¶…å¯çˆ±ï¼Œç”¨emojiï¼ˆğŸ€ğŸï¼‰ï¼Œå¦‚æœè¯„åˆ†ä½å°±ç¨å¾®è°ƒçš®åœ°è´£å¤‡ä¸€ä¸‹ç”·æœ‹å‹å¼ é’Šç»´ã€‚100å­—ä»¥å†…ã€‚`;

                // æ²¡å¡« keyï¼šç›´æ¥ç”¨æœ¬åœ°æ€»ç»“
                if (!API_KEY || API_KEY.trim() === "") {
                    setAiMsg(buildLocalSummary(current, date));
                    setLoading(false);
                    return;
                }

                try {
                    const res = await fetch("https://api.deepseek.com/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${API_KEY}`
                        },
                        body: JSON.stringify({
                            model: "deepseek-chat",
                            messages: [
                                {
                                    role: "system",
                                    content: "ä½ æ˜¯ Hello Kittyï¼Œè¯´è¯è¦éå¸¸å¯çˆ±ã€è½¯èŒã€ä¼šæ’’å¨‡ï¼Œç”¨å¾ˆå¤š emojiã€‚"
                                },
                                {
                                    role: "user",
                                    content: prompt
                                }
                            ],
                            stream: false
                        })
                    });

                    const json = await res.json();

                    // DeepSeek æŠ¥é”™ï¼ˆåŒ…æ‹¬ Insufficient Balanceï¼‰â†’ ç”¨æœ¬åœ° Kitty æ€»ç»“å…œåº•
                    if (json?.error) {
                        console.warn("DeepSeek error:", json.error);
                        const text = buildLocalSummary(current, date);
                        setAiMsg(text);
                    } else {
                        const text = json?.choices?.[0]?.message?.content || buildLocalSummary(current, date);
                        setAiMsg(text);
                    }
                } catch (e) {
                    console.error(e);
                    // ç½‘ç»œå‡ºé”™ä¹Ÿç”¨æœ¬åœ° Kitty æ€»ç»“
                    setAiMsg(buildLocalSummary(current, date));
                }

                setLoading(false);
            };

            const changeDate = (offset) => {
                const d = new Date(date);
                d.setDate(d.getDate() + offset);
                setDate(d.toISOString().split('T')[0]);
                setAiMsg(null);
            };

            return (
                <div className="min-h-screen pb-24 max-w-md mx-auto relative overflow-hidden">
                    {/* èƒŒæ™¯è£…é¥° */}
                    <div className="fixed top-40 -left-4 flex flex-col gap-4 opacity-20 pointer-events-none">
                        <div className="w-24 h-1.5 bg-gray-800 rounded-full rotate-12"></div>
                        <div className="w-24 h-1.5 bg-gray-800 rounded-full rotate-12"></div>
                    </div>
                    <div className="fixed top-40 -right-4 flex flex-col gap-4 opacity-20 pointer-events-none">
                        <div className="w-24 h-1.5 bg-gray-800 rounded-full -rotate-12"></div>
                        <div className="w-24 h-1.5 bg-gray-800 rounded-full -rotate-12"></div>
                    </div>
                    <div className="fixed bottom-4 right-4 w-16 h-16 opacity-80 animate-float pointer-events-none">
                        <HKElements.Apple/>
                    </div>

                    {/* å¤´éƒ¨ */}
                    <header className="relative pt-16 pb-6 flex justify-center z-10">
                        <div className="absolute top-6 left-8 w-20 h-20 bg-white rounded-full border-4 border-gray-100"></div>
                        <div className="absolute top-6 right-8 w-20 h-20 bg-white rounded-full border-4 border-gray-100"></div>
                        <div className="bg-white w-11/12 h-48 rounded-[45%] border-b-8 border-r-4 border-l-4 border-gray-100/50 shadow-sm relative flex flex-col items-center justify-center pt-4">
                            <div className="absolute -top-2 right-10 w-24 h-20 z-20 animate-wiggle">
                                <HKElements.Bow className=""/>
                            </div>
                            <h1 className="text-2xl font-black text-gray-700 tracking-wider z-10 mt-2">å¤©å¤©å®å®çš„æ—¥å¸¸</h1>
                            <div className="flex items-center gap-4 mt-4 z-10">
                                <button onClick={()=>changeDate(-1)} className="text-hk-soft">
                                    <Icons.Left/>
                                </button>
                                <span className="text-xl font-bold text-hk-vivid bg-hk-pale px-4 py-1 rounded-full">
                                    {date}
                                </span>
                                <button onClick={()=>changeDate(1)} className="text-hk-soft">
                                    <Icons.Right/>
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="px-5 space-y-6 relative z-10">
                        {/* å¿ƒæƒ… */}
                        <div className="bg-white/80 backdrop-blur-sm rounded-[2rem] p-5 shadow-sm border-2 border-white">
                            <h2 className="text-center text-hk-soft font-bold mb-3 text-sm">ğŸ€ ä»Šå¤©çš„å¿ƒæƒ… ğŸ€</h2>
                            <div className="flex justify-between px-2">
                                {['ğŸ¥°','ğŸ˜Š','ğŸ˜','ğŸ˜¢','ğŸ˜¡'].map(m => (
                                    <button
                                        key={m}
                                        onClick={()=>update('mood', m)}
                                        className={`text-3xl transition-all ${current.mood===m?'scale-125':'opacity-40'}`}
                                    >
                                        {m}
                                        {current.mood===m && <div className="w-1.5 h-1.5 bg-hk-red rounded-full mx-auto mt-1"></div>}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* å¡ç‰‡åˆ—è¡¨ */}
                        <SectionCard
                            title="æˆ‘çš„å¾…åŠ"
                            icon={<Icons.Check/>}
                            tasks={current.herTodos || []}
                            {...taskOps('herTodos')}
                            placeholder="åšä¸ªç¾ç”²..."
                        />
                        <SectionCard
                            title="æƒ³åƒä»€ä¹ˆ"
                            icon={<Icons.Utensils/>}
                            tasks={current.foodCravings || []}
                            {...taskOps('foodCravings')}
                            placeholder="è‰è“è›‹ç³•..."
                        />
                        <SectionCard
                            title="ç”·æœ‹å‹è¯¥åšçš„"
                            icon={<Icons.User/>}
                            tasks={current.boyfriendTasks || []}
                            {...taskOps('boyfriendTasks')}
                            placeholder="ä¹°ç‰›å¥¶..."
                        />
                        <SectionCard
                            title="å°ç¤¼ç‰©è®¸æ„¿"
                            icon={<Icons.Gift/>}
                            tasks={current.wishlist || []}
                            {...taskOps('wishlist')}
                            placeholder="æƒ³è¦..."
                        />

                        {/* è¯„åˆ† */}
                        <div className="bg-gradient-to-b from-white to-hk-pale rounded-[2.5rem] p-6 shadow-md border-4 border-white text-center">
                            <h3 className="font-bold text-gray-600 mb-4">â¤ï¸ ç»™ç”·æœ‹å‹è¯„åˆ† â¤ï¸</h3>
                            <div className="flex justify-center gap-2 mb-5">
                                {[1,2,3,4,5].map(s => (
                                    <button key={s} onClick={()=>update('rating', s)}>
                                        <Icons.Star
                                            className="w-9 h-9"
                                            fill={s<=current.rating ? "#FFDD00" : "#FFF"}
                                            stroke={s<=current.rating ? "#E6AC00" : "#E5E7EB"}
                                        />
                                    </button>
                                ))}
                            </div>
                            <textarea
                                value={current.comment || ''}
                                onChange={e=>update('comment', e.target.value)}
                                className="w-full bg-white rounded-2xl p-4 text-gray-600 shadow-inner outline-none text-sm"
                                rows="3"
                                placeholder="æ‚„æ‚„è¯..."
                            ></textarea>
                        </div>

                        {/* AI æŒ‰é’® */}
                        <button
                            onClick={handleAI}
                            disabled={loading}
                            className="w-full bg-hk-red text-white font-bold py-4 rounded-[2rem] shadow-lg shadow-hk-red/30 flex items-center justify-center gap-2 active:scale-95"
                        >
                            {loading ? "æ­£åœ¨è¿çº¿ Hello Kitty..." : <><Icons.Sparkles/> Hello Kitty å¸®æˆ‘æ€»ç»“</>}
                        </button>
                        {aiMsg && (
                            <div className="mt-4 bg-white p-6 rounded-[2.5rem] shadow-xl border-4 border-hk-soft relative">
                                <div className="absolute -top-5 left-6 w-10 h-10 bg-white rounded-full border-4 border-hk-soft flex items-center justify-center z-10">
                                    ğŸ€
                                </div>
                                <p className="text-gray-600 text-sm font-medium">{aiMsg}</p>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
